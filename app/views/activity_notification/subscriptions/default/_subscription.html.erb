<div class="fields_wrapper">
  <div class="fields_title_wrapper">
    <h3 class="fields_title">
      <%= subscription.key %>
    </h3>

    <p>
      <%= link_to "Notifications", notifications_path_for(subscription.target, filtered_by_key: subscription.key) %>
    </p>
  </div>

  <div class="field_wrapper subscribing">
    <div class="field_label">
      <label>
        Subscribe to this notification?
      </label>
    </div>
    <div class="field">
      <div class="ui checkbox">
        <% if subscription.subscribing? %>
          <%= link_to unsubscribe_path_for(subscription, option_params), onclick: '$(this).find("input").prop("checked", false);$(this).parent().parent().parent().next().slideUp();', method: :post, remote: true do %>
            <%= check_box :subscribing, "", {checked: true}, 'true', 'false' %>
            <div class="slider"></div>
          <% end %>
        <% else %>
          <%= link_to subscribe_path_for(subscription, option_params), onclick: '$(this).find("input").prop("checked", true);$(this).parent().parent().parent().next().slideDown();', method: :post, remote: true do %>
            <%= check_box :subscribing, "", {checked: false}, 'true', 'false' %>
            <div class="slider"></div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="field_wrapper subscribing_to_email <%= 'hidden' unless subscription.subscribing? %>">
    <div class="field_label">
      <label>
        Subscribe to this notification email?
      </label>
    </div>
    <div class="field">
      <div class="ui checkbox">
        <% if subscription.subscribing_to_email %>
          <%= link_to unsubscribe_to_email_url_for(subscription, option_params), onclick: '$(this).find("input").prop("checked", false)', method: :post, remote: true do %>
            <label>
              <%= check_box :subscribing_to_email, "", {checked: true}, 'true', 'false' %>
              <div class="slider"></div>
            </label>
          <% end %>
        <% else %>
          <%= link_to subscribe_to_email_url_for(subscription, option_params), onclick: '$(this).find("input").prop("checked", true)', method: :post, remote: true do %>
            <label>
              <%= check_box :subscribing_to_email, "", {checked: false}, 'true', 'false' %>
              <div class="slider"></div>
            </label>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="ui button">
    <%= link_to "Show", subscription_path_for(subscription, option_params), class: "button" %>
    <%= link_to "Destroy", subscription_path_for(subscription, option_params), method: :delete, remote: true, data: {confirm: 'Are you sure?'}, class: "button" %>
  </div>
</div>
